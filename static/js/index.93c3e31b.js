(function(e){function t(t){for(var n,s,i=t[0],c=t[1],l=t[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&h.push(r[s][0]),r[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(h.length)h.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var e,t=0;t<a.length;t++){for(var o=a[t],n=!0,i=1;i<o.length;i++){var c=o[i];0!==r[c]&&(n=!1)}n&&(a.splice(t--,1),e=s(s.s=o[0]))}return e}var n={},r={index:0},a=[];function s(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=n,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="static/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;a.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"034f":function(e,t,o){"use strict";o("85ec")},"4bdf":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("2b0e"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-row",{attrs:{align:"start"}},[o("v-col",{attrs:{cols:"12"}},[o("nav-bar")],1),o("v-col",{attrs:{cols:"12"}},[o("v-container",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("router-view")],1)],1)],1)],1)],1),o("v-spacer"),o("div",{staticClass:"on-top"},[o("v-row",{staticStyle:{"z-index":"999"},attrs:{align:"end",justify:"start"}},[o("v-col",{staticStyle:{"min-height":"100px"},attrs:{cols:"6",md:"8",sm:"12"}},[o("v-alert",{attrs:{type:e.alert.type?e.alert.type:"info"},model:{value:e.alertSwitch,callback:function(t){e.alertSwitch=t},expression:"alertSwitch"}},[e._v(" "+e._s(e.alert.message)+" ")])],1)],1)],1)],1)},a=[],s=o("5530"),i=o("2f62"),c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-toolbar",{attrs:{elevation:"2"}},[e._l(e.barItems,(function(t,n){return o("v-tooltip",{key:n,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,a=n.attrs;return[o("v-btn",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],attrs:{to:t.to,icon:""},on:{click:t.method}},"v-btn",a,!1),r),[o("v-icon",[e._v(e._s(t.icon))])],1)]}}],null,!0)},[o("span",[e._v(e._s(t.hint))])])})),o("v-spacer"),o("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.user["nickname"],expression:"user['nickname']"}],attrs:{outlined:""},on:{mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},click:function(t){e.user["nickname"]?e.logout({id:e.user.id}):e.$router.push("/")}}},[e._v(" "+e._s(e.user.nickname?e.hover?"登出":e.user.nickname:"登入")+" ")]),e.user["nickname"]?o("v-btn",{attrs:{to:"/setting",icon:""}},[o("v-icon",[e._v("mdi-cog")])],1):e._e()],2)},l=[],u=(o("d3b7"),o("25f0"),o("ac1f"),o("1276"),o("99af"),function(e,t,o){o=o.toString();var n={hour:parseInt(e.split(":")[0]),minute:parseInt(e.split(":")[1])},r={hour:parseInt(t.split(":")[0]),minute:parseInt(t.split(":")[1])},a={hour:parseInt(o.split(":")[0]),minute:parseInt(o.split(":")[1])};if(n.hour===a.hour){if(n.minute>a.minute)return!1}else if(n.hour>a.hour)return!1;if(r.hour===a.hour){if(r.minute<a.minute)return!1}else if(r.hour<a.hour)return!1;return!0}),d=function(){var e="08:00",t="12:00",o=["08:00","09:00","13:00"],n=!0;return o.forEach((function(o){var r=u(e,t,o);console.log("timePeriod:".concat(e,"~").concat(t,", checkTime:").concat(o,"\n        , result:").concat(u(e,t,o))),n=n&&r})),n},h={inTime:u,inTimeTest:d},m={components:{},mounted:function(){this.roomsRefresh(),this.locationsRefresh(),this.reservationsRefresh()},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["locations","meetingRooms","reservations","user","alert","alertSwitch"])),{},{showTestFunction:function(){return this.showTestButton}}),data:function(){return{showTestButton:!1,barItems:[{isShow:!0,hint:"主畫面",to:"/dashboard",icon:"mdi-home",method:this.showRoute("dashboard")},{isShow:!0,hint:"預約會議室",icon:"mdi-plus",to:"/available-room",method:this.showRoute("dashboard")},{isShow:!0,hint:"會議日程表",icon:"mdi-calendar-range",to:"/calendar",method:this.showRoute("calendar")},{isShow:this.showTestFunction,hint:"測試通知",icon:"mdi-alert",to:"",method:this.testAlert},{isShow:this.showTestFunction,hint:"時間測試",icon:"mdi-alarm",to:"",method:this.testTimeCheck}],hover:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({roomsRefresh:"roomsRefresh",locationsRefresh:"locationsRefresh",reservationsRefresh:"reservationsRefresh",logout:"logout",showAlert:"showAlert"})),{},{testSet:function(){this.$cookies.set("test",{id:0})},testGet:function(){console.log(this.$cookies.get("test"))},testClear:function(){this.$cookies.remove("test")},testAlert:function(){this.$store.dispatch("showAlert",{message:"test",type:"info"})},testTimeCheck:function(){h.inTimeTest()},showRoute:function(e){var t=e||this.$route.path;return function(){console.log(t)}}})},f=m,v=o("2877"),p=Object(v["a"])(f,c,l,!1,null,null,null),g=p.exports,_={components:{NavBar:g},mounted:function(){this.roomsRefresh(),this.locationsRefresh(),this.reservationsRefresh()},computed:Object(s["a"])({},Object(i["c"])({locations:"locations",meetingRooms:"meetingRooms",reservations:"reservations",user:"user",alert:"alert",alertSwitch:"alertSwitch"})),watch:{alertSwitch:{handler:function(){}}},data:function(){return{}},methods:Object(s["a"])({},Object(i["b"])({roomsRefresh:"roomsRefresh",locationsRefresh:"locationsRefresh",reservationsRefresh:"reservationsRefresh",logout:"logout",showAlert:"showAlert"}))},b=_,w=(o("034f"),Object(v["a"])(b,r,a,!1,null,null,null)),R=w.exports,k={times:["08:00","08:15","08:30","08:45","09:00","09:15","09:30","09:45","10:00","10:15","10:30","10:45","11:00","11:15","11:30","11:45","12:00","12:15","12:30","12:45","13:00","13:15","13:30","13:45","14:00","14:15","14:30","14:45","15:00","15:15","15:30","15:45","16:00","16:15","16:30","16:45","17:00","17:15","17:30","17:45","18:00","18:15","18:30","18:45","19:00","19:15","19:30","19:45","20:00","20:15","20:30","20:45","21:00","21:15","21:30","21:45","22:00"],hours:["8","9","10","11","12","13","14","15","16","17","18","19","20","21","22"],weekdays:["日","一","二","三","四","五","六"]},x={user:{id:-1,username:"",nickname:"",token:""}},y={address:"http://127.0.0.1:8000/",api_version:"api/v1/",server:"http://127.0.0.1:8000/api/v1/",apis:{user:"users/",room:"rooms/",location:"locations/",reservation:"reservations/",verification:"verification/",messages:"pop_messages/",roomExchangeRequest:"room_exchange_request/"}},j={meetingRooms:[],locations:[],reservations:[],messages:[],roomExchangeRequests:[]},O={showReserveForm:!1,reservationRoomID:-1,reserveData:{room_id:-1,use_date:"",start_time:"",end_time:""},alertSwitch:!1,alert:{message:"",type:""}},D=Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},k),x),y),j),O),E=(o("5319"),o("5b81"),o("4de4"),{unavailableRooms:function(e){var t=(new Date).toLocaleDateString("zh-tw").replaceAll("/","-"),o=new Date,n=o.getHours(),r=o.getMinutes(),a=(n<10?"0":"")+n.toString()+":"+(r<10?"0":"")+r.toString();return e.reservations.filter((function(e){return e.use_date===t&&h.inTime(e.start_time,e.end_time,a)}))}}),q=Object(s["a"])(Object(s["a"])({},E),{},{isVerified:function(e){return null!==e.user&&""!==e.user.token},token:function(e){return e.user["token"]?e.user["token"]:""}}),S=o("bc3a"),T=o.n(S),$=o("1da1"),P=(o("96cf"),o("b0c0"),o("8c4f")),A=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-list-item",[o("v-icon",[e._v("mdi-circle-medium")]),o("span",{staticClass:"title"},[e._v("會議室時刻表")]),o("v-divider")],1)],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-text",[o("my-date-picker",{attrs:{"date-model":e.choseDate,"picker-switch":e.date_picker,label:"選擇日期"},on:{"update:dateModel":function(t){e.choseDate=t},"update:date-model":function(t){e.choseDate=t}}}),o("v-checkbox",{attrs:{label:"我的會議"},model:{value:e.showMyMeeting,callback:function(t){e.showMyMeeting=t},expression:"showMyMeeting"}}),o("v-divider"),o("v-tabs",e._l(e.locations,(function(t,n){return o("v-tab",{key:n,attrs:{id:t["location_name"]},on:{click:function(o){return e.changeTab(t["id"])}}},[e._v(" "+e._s(t["location_name"])+" ")])})),1),o("v-simple-table",[o("thead",[o("tr",[o("th"),e._l(e.weekdayOffsets,(function(t,n){return o("th",{key:n},[o("v-row",[o("v-col",[e._v(" "+e._s((e.$vuetify.breakpoint.sm?"":"星期")+e.weekdays[(e.choseDateToDate.getDay()+t)%7].toString())+" "),o("span",{staticClass:"d-none d-md-none d-lg-flex"},[e._v(" "+e._s(e.calculatedDate(t))+" ")])])],1)],1)}))],2)]),o("tbody",e._l(e.hours,(function(t){return o("tr",{key:t},[o("td",[o("span",[e._v(" "+e._s(t)+" ")])]),e._l(e.weekdayOffsets,(function(n,r){return o("td",{key:r},e._l(e.weeklyReservation[n].filter((function(o){return e.inTime(o.start_time,o.end_time,t)})),(function(t,n){return o("meeting-card",{directives:[{name:"show",rawName:"v-show",value:!e.showMyMeeting||t.user_id===e.user.id,expression:"\n                    showMyMeeting\n                      ? filteredReservation.user_id === user.id\n                      : true\n                  "}],key:n,attrs:{reservation:t}})})),1)}))],2)})),0)])],1)],1)],1)],1)},C=[],F=(o("d81d"),o("159b"),o("caad"),o("2532"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"schedule",on:{click:function(t){e.showDetail=!0}}},[o("v-card",[o("v-card-text",[o("span",[e._v(" "+e._s(e.reservation.reason.length>30?e.reservation.reason.substring(0,20)+"...":e.reservation.reason)+" ")]),o("v-divider"),o("span",[e._v(" "+e._s(e.reservation.start_time+"~"+e.reservation.end_time)+" ")])],1)],1),o("v-dialog",{attrs:{width:"unset"},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}},[o("v-card",[o("v-card-title",[e._v(e._s(e.reservation.reason))]),o("v-card-text",[o("v-list",e._l(e.simpleField,(function(t,n){return o("v-list-item",{directives:[{name:"show",rawName:"v-show",value:!t.hide,expression:"!item.hide"}],key:n,staticClass:"simple-field"},[o("v-list-item-icon",[o("v-icon",[e._v(e._s(t.icon))])],1),o("v-list-item-content",{domProps:{textContent:e._s(t.field)}})],1)})),1)],1),o("v-card-actions",[e.reservation.user_id===e.user.id?o("v-btn",{staticClass:"red white--text",attrs:{text:""},on:{click:function(t){return e.deleteReservation({id:e.reservation.id})}}},[e._v(" 刪除 ")]):e._e(),e.reservation.user_id!==e.user.id?o("v-btn",{staticClass:"orange lighten-3",on:{click:e.makeExchange}},[e._v(" 協調 ")]):e._e(),o("v-btn",{attrs:{text:"",outlined:""},on:{click:function(t){e.showDetail=!1}}},[e._v("關閉")])],1)],1)],1),o("room-exchange-form",{attrs:{type:"REQUEST",show:e.showExchangeForm,"request-data":e.reservation},on:{"update:show":function(t){e.showExchangeForm=t}}})],1)}),M=[],I=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"unset"},model:{value:e.formShow,callback:function(t){e.formShow=t},expression:"formShow"}},[o("v-card",[o("v-card-title",[o("span",[e._v("會議室交換")])]),o("v-card-text",["REPLY"===e.type?o("v-form",{ref:"replyForm"},[o("v-text-field",{attrs:{label:"接受/拒絕 理由",rules:e.replyRules},model:{value:e.reply,callback:function(t){e.reply=t},expression:"reply"}})],1):e._e(),"REQUEST"===e.type?o("v-form",{ref:"requestForm"},[o("v-text-field",{attrs:{label:"協調理由",rules:e.reasonRules},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.makeRequest.apply(null,arguments)}},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}})],1):e._e()],1),o("v-card-actions",["REQUEST"===e.type?o("v-btn",{staticClass:"blue lighten-3 white--text",attrs:{outlined:""},on:{click:e.makeRequest}},[e._v(" 申請 ")]):e._e(),"REPLY"===e.type?o("v-btn",{staticClass:"blue lighten-3 white--text",attrs:{outlined:""},on:{click:function(t){return e.replyRequest("ACCEPT")}}},[e._v(" 接受 ")]):e._e(),"REPLY"===e.type?o("v-btn",{staticClass:"red lighten-3 white--text",attrs:{outlined:""},on:{click:function(t){return e.replyRequest("REJECT")}}},[e._v(" 拒絕 ")]):e._e()],1)],1)],1)},L=[],N={props:["show","requestData","type"],computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({user:"user"})),{},{formShow:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}}}),data:function(){return{reply:"",reason:"",replyRules:[function(e){return e.length>0||"請輸入拒絕/接受理由"}],reasonRules:[function(e){return e.length>0||"請輸入協調理由"}]}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({replyExchangeRequest:"replyExchangeRequest",makeExchangeRequest:"makeExchangeRequest",showAlert:"showAlert"})),{},{replyRequest:function(e){var t=this;if(this.$refs.replyForm.validate()){var o=this.requestData;o.reply=this.reply,o.status=e,this.replyExchangeRequest(o).then((function(e){console.log(e),t.formShow=!1}))}},makeRequest:function(){var e=this;if(this.$refs.requestForm.validate()){var t={reason:this.reason,reservation_id:this.requestData.id,requester_id:this.user.id,replier_id:this.requestData.user_id};this.makeExchangeRequest(t).then((function(t){console.log(t),e.formShow=!1}))}}})},H=N,z=Object(v["a"])(H,I,L,!1,null,"f67310c4",null),V=z.exports,B={props:["reservation"],components:{RoomExchangeForm:V},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["meetingRooms","user"])),{},{simpleField:function(){return[{icon:"mdi-clock-outline",field:"".concat(this.reservation.start_time,"~").concat(this.reservation.end_time)},{icon:"mdi-calendar-today",field:this.reservation["use_date"]},{icon:"mdi-map-marker",field:this.reservation["room_name"]},{hide:0===this.reservation["host"].length,icon:"mdi-account",field:this.reservation["host"]},{hide:!(this.reservation["attendee"]||this.reservation["guest"]),icon:"mdi-account-multiple",field:"".concat(this.reservation["attendee"]," 位同仁 ").concat(this.reservation["guest"]," 位來賓")},{hide:!(this.reservation["coffee"]||this.reservation["tea"]||this.reservation["water"]),icon:"mdi-coffee",field:"".concat(this.reservation["coffee"]," 杯咖啡 ").concat(this.reservation["water"]," 杯水 ").concat(this.reservation["tea"]," 杯茶")},{hide:!(this.reservation["meal_courtyard"]||this.reservation["meal_buffet"]),icon:"mdi-silverware-fork-knife",field:"中庭 ".concat(this.reservation["meal_courtyard"],"人 自助餐").concat(this.reservation["meal_buffet"],"人")},{hide:!this.reservation["note"],icon:"mdi-note-edit",field:this.reservation["note"]},{icon:"mdi-phone",field:this.reservation["reservation_user_nickname"]}]}}),data:function(){return{showDetail:!1,showExchangeForm:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({deleteReservation:"deleteReservation"})),{},{makeExchange:function(){this.showExchangeForm=!0}})},Q=B,U=(o("8c32"),Object(v["a"])(Q,F,M,!1,null,"55221691",null)),G=U.exports,W=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[o("v-text-field",e._g({attrs:{label:e.label,rules:e.rules,clearable:"",readonly:""},model:{value:e.myDateModel,callback:function(t){e.myDateModel=t},expression:"myDateModel"}},n))]}}]),model:{value:e.myPickerSwitch,callback:function(t){e.myPickerSwitch=t},expression:"myPickerSwitch"}},[o("v-date-picker",{attrs:{min:e.minDate},on:{input:function(t){e.myPickerSwitch=!1}},model:{value:e.myDateModel,callback:function(t){e.myDateModel=t},expression:"myDateModel"}})],1)},Y=[],J={props:["dateModel","pickerSwitch","label","max","min","rules"],computed:{myDateModel:{get:function(){return this.dateModel},set:function(e){this.$emit("update:dateModel",e)}},minDate:function(){return this.min?this.min:""},formRule:function(){return this.rules?this.rules:[]}},data:function(){return{myPickerSwitch:!1}}},K=J,X=Object(v["a"])(K,W,Y,!1,null,"9669bc2c",null),Z=X.exports,ee={components:{MyDatePicker:Z,MeetingCard:G},mounted:function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.locationsRefresh();case 2:return e.next=4,this.reservationsRefresh().then((function(){}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["locations","reservations","meetingRooms","hours","weekdays","user"])),{},{filteredRoomIDs:function(){var e=this,t=this.meetingRooms.filter((function(t){return t.location_id===e.location_id}));return t.map((function(e){return e.id}))},choseDateToDate:function(){return new Date(this.choseDate)},weeklyReservation:function(){var e=this,t={0:[],1:[],2:[],3:[],4:[],5:[],6:[]},o=new Date(this.choseDate);return this.reservations.forEach((function(n){if(e.filteredRoomIDs.includes(n["room_id"])){var r=new Date(n.use_date);if(e.dateInWeekRange(n.use_date)){var a=(r-o)/864e5;0<=a&&a<=6&&t[a].push(n)}}})),t},weekdayOffsets:function(){return[0,1,2,3,4,5,6]}}),watch:{locations:{handler:function(){this.location_id=this.locations.length?this.locations[0].id:-1},deep:!0}},data:function(){return{place:"",choseDate:(new Date).toLocaleDateString("zh-tw").replaceAll("/","-"),location_id:-1,date_picker:!1,showMyMeeting:""}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({reservationsRefresh:"reservationsRefresh",locationsRefresh:"locationsRefresh",showAlert:"showAlert"})),{},{changeTab:function(e){this.location_id=e},inTime:function(e,t,o){var n=parseInt(o.split(":")[0]),r=parseInt(e.split(":")[0]),a=parseInt(t.split(":")[0]);return r<=n&&n<=a},dateInWeekRange:function(e){var t=new Date(e),o=new Date(this.choseDate),n=new Date(this.choseDate);return n.setDate(n.getDate()+6),o<=t&&t<=n},calculatedDate:function(e){var t=new Date(this.choseDate);return t.setDate(t.getDate()+e),t.toLocaleDateString("zh-tw")}})},te=ee,oe=Object(v["a"])(te,A,C,!1,null,"a26420ec",null),ne=oe.exports,re=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"會議室列表"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-subtitle",{attrs:{id:"location-tabs"}},[o("v-tabs",e._l(e.locations,(function(t,n){return o("v-tab",{key:n,on:{click:function(o){e.locationID=t["id"]}}},[e._v(" "+e._s(t["location_name"])+" ")])})),1),o("v-divider")],1),o("v-card-text",{attrs:{id:"available-meeting-room"}},e._l(e.dateWeekRange,(function(t,n){return o("available-meeting-room",{key:n,attrs:{"the-date":t,"location-id":e.locationID}})})),1)],1)],1)],1)},ae=[],se=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{staticStyle:{margin:"10px 0"}},[o("v-card-subtitle",{class:e.theDate===e.today?e.todayClass:e.notTodayClass},[o("span",[e._v(" "+e._s((e.theDate===e.today?"今天 ":"")+e.theDate)+" ")])]),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[e.filteredByLocationRooms.length?e._e():o("span",[e._v(" "+e._s("目前無可用的會議室")+" ")])]),e._l(e.filteredByLocationRooms,(function(t,n){return o("v-col",{key:n,attrs:{dense:""}},[o("v-card",[o("v-card-text",[o("span",[e._v(e._s(t["room_name"]))])]),o("v-divider"),o("v-card-actions",[o("v-btn",{class:e.checkedPeriod[t.id]["morning"]?e.unavailableClass:e.availableClass,attrs:{disabled:(new Date).getHours()>12&&e.theDate===e.today,text:""},on:{click:function(o){return e.openReverseFromDialog(t.id,"8:00","12:00")}}},[e._v(" 預約上午 ")]),o("v-btn",{class:e.checkedPeriod[t.id]["afternoon"]?e.unavailableClass:e.availableClass,attrs:{disabled:(new Date).getHours()>18,text:""},on:{click:function(o){return e.openReverseFromDialog(t.id,"13:00","17:00")}}},[e._v(" 預約下午 ")])],1)],1)],1)})),o("v-col",{attrs:{cols:"12"}},[o("reserve-form",{attrs:{show:e.showReverseForm,"reserve-data":e.reservationData},on:{"update:show":function(t){e.showReverseForm=t}}})],1)],2)],1)],1)},ie=[],ce=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("form",[o("v-dialog",{attrs:{width:"unset"},model:{value:e.showReserveForm,callback:function(t){e.showReserveForm=t},expression:"showReserveForm"}},[o("v-card",[o("v-card-title",[e._v(e._s(e.filteredRoomName+" - 租借表單"))]),o("v-card-text",[o("v-form",{ref:"formValidate",attrs:{"lazy-validation":""},model:{value:e.formInstance,callback:function(t){e.formInstance=t},expression:"formInstance"}},[o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{id:"use_date",cols:"10"}},[o("my-date-picker",{attrs:{"date-model":e.form.use_date,rules:e.formRules.useDateRule,label:"使用日期"},on:{"update:dateModel":function(t){return e.$set(e.form,"use_date",t)},"update:date-model":function(t){return e.$set(e.form,"use_date",t)}}})],1),o("v-col",{attrs:{id:"startTimePicker",cols:"5"}},[o("v-menu",{attrs:{"close-on-content-click":!1,"min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[o("v-text-field",e._g({attrs:{label:"開始時間",rules:e.formRules.startTimeRule,clearable:"",readonly:""},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}},n))]}}]),model:{value:e.startTimePicker,callback:function(t){e.startTimePicker=t},expression:"startTimePicker"}},[o("v-time-picker",{attrs:{min:"08:00",max:"22:00","allowed-minutes":function(e){return e%15===0}},on:{input:function(t){e.startTimePicker=!1}},model:{value:e.form.start_time,callback:function(t){e.$set(e.form,"start_time",t)},expression:"form.start_time"}})],1)],1),o("v-col",{attrs:{id:"endTimePicker",cols:"5"}},[o("v-menu",{attrs:{"close-on-content-click":!1,"min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[o("v-text-field",e._g({attrs:{label:"結束時間",rules:e.formRules.endTimeRule,clearable:"",readonly:""},model:{value:e.form.end_time,callback:function(t){e.$set(e.form,"end_time",t)},expression:"form.end_time"}},n))]}}]),model:{value:e.endTimePicker,callback:function(t){e.endTimePicker=t},expression:"endTimePicker"}},[o("v-time-picker",{attrs:{min:e.form.start_time,max:"22:00","allowed-minutes":function(e){return e%15===0}},on:{input:function(t){e.endTimePicker=!1}},model:{value:e.form.end_time,callback:function(t){e.$set(e.form,"end_time",t)},expression:"form.end_time"}})],1)],1),o("v-col",{attrs:{id:"reason",cols:"10"}},[o("v-text-field",{attrs:{label:"用途說明",rules:e.formRules.reasonRule},model:{value:e.form.reason,callback:function(t){e.$set(e.form,"reason",t)},expression:"form.reason"}})],1),o("v-col",{attrs:{id:"reason",cols:"10"}},[o("v-text-field",{attrs:{label:"主持人"},model:{value:e.form.host,callback:function(t){e.$set(e.form,"host",t)},expression:"form.host"}})],1),o("v-col",{attrs:{id:"options",cols:"10"}},[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-checkbox",{attrs:{label:"與會者"},model:{value:e.fieldSwitch.attendee,callback:function(t){e.$set(e.fieldSwitch,"attendee",t)},expression:"fieldSwitch.attendee"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-checkbox",{attrs:{label:"茶水"},model:{value:e.fieldSwitch.water,callback:function(t){e.$set(e.fieldSwitch,"water",t)},expression:"fieldSwitch.water"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-checkbox",{attrs:{label:"訂餐"},model:{value:e.fieldSwitch.meal,callback:function(t){e.$set(e.fieldSwitch,"meal",t)},expression:"fieldSwitch.meal"}})],1)],1)],1),e.fieldSwitch.attendee?o("v-col",{attrs:{id:"attendee-and-guest",cols:"10"}},[o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{id:"attendee",cols:"6"}},[o("v-text-field",{attrs:{label:"與會同仁",type:"number"},model:{value:e.form.attendee,callback:function(t){e.$set(e.form,"attendee",t)},expression:"form.attendee"}})],1),o("v-col",{attrs:{id:"guest",cols:"6"}},[o("v-text-field",{attrs:{label:"與會來賓",type:"number"},model:{value:e.form.guest,callback:function(t){e.$set(e.form,"guest",t)},expression:"form.guest"}})],1)],1)],1):e._e(),e.fieldSwitch.water?o("v-col",{attrs:{id:"water-tea-and-coffee",cols:"10"}},[o("v-row",[o("v-col",{attrs:{cols:"4"}},[o("v-text-field",{attrs:{label:"水",type:"number"},model:{value:e.form.water,callback:function(t){e.$set(e.form,"water",t)},expression:"form.water"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-text-field",{attrs:{label:"茶",type:"number"},model:{value:e.form.tea,callback:function(t){e.$set(e.form,"tea",t)},expression:"form.tea"}})],1),o("v-col",{attrs:{cols:"4"}},[o("v-text-field",{attrs:{label:"咖啡",type:"number"},model:{value:e.form.coffee,callback:function(t){e.$set(e.form,"coffee",t)},expression:"form.coffee"}})],1)],1)],1):e._e(),e.fieldSwitch.meal?o("v-col",{attrs:{id:"meal",cols:"10"}},[o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{id:"meal-courtyard",cols:"6"}},[o("v-text-field",{attrs:{label:"中庭",type:"number"},model:{value:e.form.meal_courtyard,callback:function(t){e.$set(e.form,"meal_courtyard",t)},expression:"form.meal_courtyard"}})],1),o("v-col",{attrs:{id:"meal-buffet",cols:"6"}},[o("v-text-field",{attrs:{label:"自助餐",type:"number"},model:{value:e.form.meal_buffet,callback:function(t){e.$set(e.form,"meal_buffet",t)},expression:"form.meal_buffet"}})],1)],1)],1):e._e(),o("v-col",{attrs:{id:"note",cols:"10"}},[o("v-text-field",{attrs:{label:"備註"},model:{value:e.form.note,callback:function(t){e.$set(e.form,"note",t)},expression:"form.note"}})],1)],1)],1)],1),o("v-card-actions",[o("v-btn",{on:{click:e.close}},[e._v("關閉表單")]),o("v-btn",{on:{click:e.validateAndSend}},[e._v("送出預約")])],1)],1)],1)],1)},le=[],ue={props:["show","reserveData"],components:{MyDatePicker:Z},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({rooms:"meetingRooms",reservations:"reservations",times:"times",user:"user"})),{},{room_id:function(){return this.reserveData.room_id},showReserveForm:{get:function(){return this.show},set:function(e){this.$emit("update:show",e)}},filteredRoomName:function(){var e=this;if(!this.showReserveForm)return"";var t=this.rooms.filter((function(t){return t.id===e.reserveData["room_id"]}));return t.length?t[0]["room_name"]:""}}),watch:{"validate.use_date":function(){console.log(this.form.use_date)},showReserveForm:{handler:function(){this.form.use_date=this.reserveData.use_date,this.form.start_time=this.reserveData.start_time,this.form.end_time=this.reserveData.end_time}}},data:function(){return{datePicker:!1,startTimePicker:!1,endTimePicker:!1,fieldSwitch:{attendee:!1,water:!1,meal:!1},formInstance:!0,form:{reason:"",use_date:(new Date).toLocaleDateString("zh-tw").replaceAll("/","-"),start_time:"",end_time:"",host:"",attendee:0,guest:0,tea:0,water:0,coffee:0,water_dispenser:!1,meal_courtyard:0,meal_buffet:0,note:""},formRules:{useDateRule:[function(e){return!!e||"請選擇日期"}],reasonRule:[function(e){return!!e||"請輸入用途說明"}],startTimeRule:[function(e){return!!e||"請選擇開始時間"},function(e){var t=parseInt(e.split(":")[0]);return t>(new Date).getHours()||"選擇時間已過，請重新選擇開始時間"}],endTimeRule:[function(e){return!!e||"請選擇結束時間"},function(e){var t=parseInt(e.split(":")[0]);return t>(new Date).getHours()||"選擇時間已過，請重新選擇結束時間"}]}}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({newReservation:"newReservation",showAlert:"showAlert",roomsRefresh:"roomsRefresh"})),{},{validateAndSend:function(){var e=this;this.$refs.formValidate.validate()&&(this.form["room_id"]=this.room_id,this.form["user_id"]=this.user.id,this.newReservation(this.form).then((function(t){console.log(t),e.showReserveForm=!1})))},close:function(){this.showReserveForm=!1,this.$refs.formValidate.resetValidation(),this.$refs.formValidate.reset()}})},de=ue,he=Object(v["a"])(de,ce,le,!1,null,"72c70788",null),me=he.exports,fe={props:["locationId","theDate"],components:{ReserveForm:me},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({locations:"locations",meetingRooms:"meetingRooms"})),{},{reservations:{get:function(){var e=this;return this.$store.state.reservations.filter((function(t){return t.use_date===e.theDate.replaceAll("/","-")}))}},checkedPeriod:function(){var e={};return this.meetingRooms.forEach((function(t){e[t.id]={}})),this.reservations.forEach((function(t){var o,n,r,a,s=parseInt(t.start_time.split(":")[0]),i=parseInt(t.end_time.split(":")[0]),c=8<=s&&s<=12||8<=i&&i<=12,l=13<=s&&s<=17||13<=i&&i<=17;(o=e[t.room_id])[n="morning"]||(o[n]=c),(r=e[t.room_id])[a="afternoon"]||(r[a]=l)})),e},filteredByLocationRooms:function(){var e=this;return this.meetingRooms.filter((function(t){return t.location_id===e.locationId}))}}),data:function(){return{today:(new Date).toLocaleDateString(),todayClass:"success white--text",notTodayClass:"grey white--text",availableClass:"success white--text",unavailableClass:"error white--text",showReverseForm:!1,reservationData:null}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])(["locationsRefresh"])),{},{openReverseFromDialog:function(e,t,o){this.reservationData={room_id:e,use_date:this.theDate.replaceAll("/","-"),start_time:t,end_time:o},this.showReverseForm=!0}})},ve=fe,pe=Object(v["a"])(ve,se,ie,!1,null,"3481b5ea",null),ge=pe.exports,_e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-list-item",[o("v-icon",[e._v("mdi-circle-medium")]),o("span",{staticClass:"title"},[e._v(e._s(e.title))]),e._t("default"),o("v-divider")],2)},be=[],we={props:["title"]},Re=we,ke=Object(v["a"])(Re,_e,be,!1,null,"e1a4a7c2",null),xe=ke.exports,ye={components:{AvailableMeetingRoom:ge,PageTitle:xe},mounted:function(){this.locationsRefresh(),this.reservationsRefresh()},data:function(){return{locationID:1,tab_id:0}},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({meetingRooms:"meetingRooms",locations:"locations"})),{},{dateWeekRange:function(){for(var e=[],t=0;t<7;t++){var o=new Date;o.setDate(o.getDate()+t),e.push(o.toLocaleDateString())}return e}}),watch:{locations:{handler:function(){this.locationID=this.locations.length?this.locations[0].id:-1},deep:!0,immediate:!0}},methods:Object(s["a"])({},Object(i["b"])({locationsRefresh:"locationsRefresh",reservationsRefresh:"reservationsRefresh"}))},je=ye,Oe=(o("8ac0"),Object(v["a"])(je,re,ae,!1,null,"6466edb6",null)),De=Oe.exports,Ee=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{attrs:{lg:"6",md:"8",sm:"10"}},[o("v-form",{ref:"loginForm",model:{value:e.formInstance,callback:function(t){e.formInstance=t},expression:"formInstance"}},[o("v-text-field",{attrs:{label:"用戶名"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}}),o("v-text-field",{attrs:{label:"密碼",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.userLogin.apply(null,arguments)}},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}}),o("v-btn",{on:{click:e.userLogin}},[e._v("登入")])],1)],1)],1)},qe=[],Se={data:function(){return{formInstance:!0,user:{username:"",password:""}}},computed:{},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({login:"login",showAlert:"showAlert"})),{},{userLogin:function(){this.login(this.user)}})},Te=Se,$e=Object(v["a"])(Te,Ee,qe,!1,null,"95b8985a",null),Pe=$e.exports,Ae=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"我的應用"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-text",[o("application-panel")],1)],1)],1),o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"通知"}})],1),o("v-col",{staticStyle:{"min-height":"60px"},attrs:{cols:"12"}},[o("v-card",[o("v-card-text",[o("message-block")],1)],1)],1)],1)},Ce=[],Fe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("v-virtual-scroll",{attrs:{items:[1],height:"100","item-height":"30"}},[o("v-simple-table",[o("tbody",e._l(e.messages,(function(t,n){return o("tr",{key:n,staticStyle:{cursor:"pointer"},on:{click:function(o){return e.showDialog(t)}}},[o("td",[o("v-icon",[e._v("mdi-alarm")])],1),o("td",[e._v(e._s(t.title))]),o("td",[e._v(e._s(t.text))])])})),0)])],1)],1),o("v-col",{attrs:{cols:"12"}},[o("v-dialog",{attrs:{width:"unset"},model:{value:e.dialogFlag,callback:function(t){e.dialogFlag=t},expression:"dialogFlag"}},[o("v-card",[o("v-card-title",[e._v(e._s(e.dialogData.title))]),o("v-card-text",[e._v(e._s(e.dialogData.text))]),o("v-card-actions",[o("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.dialogData.redirect_url,expression:"dialogData.redirect_url"}],attrs:{to:e.dialogData.redirect_url}},[e._v(" go to panel ")]),o("v-btn",{on:{click:function(t){e.dialogFlag=!1}}},[e._v("close")])],1)],1)],1)],1)],1)},Me=[],Ie={mounted:function(){this.getMessages()},computed:Object(s["a"])({},Object(i["c"])(["messages"])),data:function(){return{dialogFlag:!1,dialogData:{title:"",text:"",redirect_url:""}}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({getMessages:"getMessages"})),{},{test:function(e){console.log(e)},showDialog:function(e){this.dialogFlag=!0,this.dialogData=e}})},Le=Ie,Ne=Object(v["a"])(Le,Fe,Me,!1,null,"09eef390",null),He=Ne.exports,ze=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},e._l(e.appsDetail,(function(t,n){return o("v-tooltip",{key:n,attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(n){var r=n.on,a=n.attrs;return[o("v-badge",{attrs:{color:t.color?t.color:"warning",content:t.content.toString(),value:t.value,bordered:"",overlap:""}},[o("v-btn",e._g(e._b({attrs:{to:t.to,"x-large":"",icon:""}},"v-btn",a,!1),r),[o("v-icon",[e._v(e._s(t.icon))])],1)],1)]}}],null,!0)},[o("span",[e._v(e._s(t.hint))])])})),1)],1)},Ve=[],Be={mounted:function(){this.getRoomExchangeRequest(),this.reservationsRefresh()},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])({roomExchangeRequests:"roomExchangeRequests",reservations:"reservations",user:"user"})),{},{appsDetail:function(){return[{icon:"mdi-calculator-variant",to:"/account",hint:"會計",value:0,content:0},{icon:"mdi-account",to:"/hr",hint:"人資",value:0,content:0},{icon:"mdi-file",to:"/project",hint:"專案",value:0,content:0},{icon:"mdi-plus",to:this.hasTodayReservation||this.hasReservations?"/calendar":"/available-room",hint:"借用會議室",value:this.hasReservations,content:"",color:this.hasTodayReservation?"error":""},{icon:"mdi-handshake",to:"/room-exchange",hint:"協調會議室",value:this.exchangeRequestCount,content:this.exchangeRequestCount}]}}),watch:{roomExchangeRequests:{handler:function(){var e=this,t=this.roomExchangeRequests.filter((function(t){var o=t.replier_id===e.user.id,n=t.requester_id===e.user.id,r="REQUESTING"===t.status;return n&&!r||o&&r}));this.exchangeRequestCount=t.length},deep:!0},reservations:{handler:function(){var e=this,t=this.reservations.filter((function(t){var o=new Date(t.use_date),n=new Date((new Date).toLocaleDateString());return t.user_id===e.user.id&&o>n})),o=t.filter((function(e){var t=(new Date).toLocaleDateString().replaceAll("/","-");return e.use_date===t}));this.hasReservations=t.length>0,this.hasTodayReservation=o.length>0},deep:!0}},data:function(){return{hasReservations:!1,hasTodayReservation:!1,exchangeRequestCount:0,acceptedRequestCount:0,rejectedRequestCount:0}},methods:Object(s["a"])({},Object(i["b"])({getRoomExchangeRequest:"getRoomExchangeRequest",reservationsRefresh:"reservationsRefresh"}))},Qe=Be,Ue=Object(v["a"])(Qe,ze,Ve,!1,null,"62391c50",null),Ge=Ue.exports,We={components:{MessageBlock:He,PageTitle:xe,ApplicationPanel:Ge}},Ye=We,Je=Object(v["a"])(Ye,Ae,Ce,!1,null,"48a9b94c",null),Ke=Je.exports,Xe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",{attrs:{justify:"center"}},[o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"待處理之會議室交換請求"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-text",[e.requestingRoomExchangeRequests.length?o("v-simple-table",[o("thead",[o("tr",[e._l(e.requestingTableHeader,(function(t,n){return o("th",{key:n},[e._v(" "+e._s(t)+" ")])})),o("th",[e._v("回覆")])],2)]),o("tbody",e._l(e.requestingRoomExchangeRequests,(function(t,n){return o("tr",{key:n},[o("td",[e._v(" "+e._s(t.requester_name)+" ")]),o("td",[e._v(" "+e._s(t.room_name)+" ")]),o("td",[e._v(" "+e._s(t.reason)+" ")]),o("td",[e._v(" "+e._s(t.reservation_date)+" ")]),o("td",[e._v(" "+e._s(t.reservation_start_time+"~"+t.reservation_end_time)+" ")]),o("td",[o("v-btn",{on:{click:function(o){return e.replyExchangeRequest(t)}}},[e._v("回覆")])],1)])})),0)]):e._e(),e.requestingRoomExchangeRequests.length?e._e():o("span",[e._v("無")])],1)],1)],1),o("v-col",{attrs:{cols:"12"}}),o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"已回覆之會議室交換請求"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-text",[e.notRequestingRoomExchangeRequests.length?o("v-simple-table",[o("thead",[o("tr",e._l(e.notRequestingTableHeader,(function(t,n){return o("th",{key:n},[e._v(" "+e._s(t)+" ")])})),0)]),o("tbody",e._l(e.notRequestingRoomExchangeRequests,(function(t,n){return o("tr",{key:n,staticClass:"white--text lighten-1",class:"ACCEPT"===t.status?"green":"red"},[o("td",[e._v(" "+e._s("ACCEPT"===t.status?"接受":"拒絕")+" ")]),o("td",[e._v(" "+e._s(t.room_name)+" ")]),o("td",[e._v(" "+e._s(t.reservation_date)+" ")]),o("td",[e._v(" "+e._s(t.reservation_start_time+"~"+t.reservation_end_time)+" ")]),o("td",[e._v(" "+e._s(t.reason)+" ")]),o("td",[e._v(" "+e._s(t.reply)+" ")]),o("td",[o("v-btn",{attrs:{color:"white",icon:""},on:{click:function(o){return e.readRequest(t.id)}}},[o("v-icon",[e._v("mdi-check")])],1)],1)])})),0)]):e._e(),e.notRequestingRoomExchangeRequests.length?e._e():o("span",[e._v("無")])],1)],1)],1),o("v-col",{attrs:{cols:"12"}},[o("room-exchange-form",{attrs:{show:e.showExchangeForm,"request-data":e.requestData,type:"REPLY"},on:{"update:show":function(t){e.showExchangeForm=t}}})],1)],1)},Ze=[],et={components:{PageTitle:xe,RoomExchangeForm:V},mounted:function(){this.getRoomExchangeRequest()},computed:Object(s["a"])(Object(s["a"])({},Object(i["c"])(["roomExchangeRequests","user"])),{},{requestingRoomExchangeRequests:function(){var e=this;return this.roomExchangeRequests.filter((function(t){return"REQUESTING"===t.status&&t.replier_id===e.user.id})).reverse()},notRequestingRoomExchangeRequests:function(){var e=this;return this.roomExchangeRequests.filter((function(t){return"REQUESTING"!==t.status&&t.requester_id===e.user.id})).reverse()}}),data:function(){return{requestingTableHeader:["請求人","會議室","交換理由","日期","時段"],notRequestingTableHeader:["請求結果","會議室","日期","時段","協調理由","回覆","已讀訊息"],showExchangeForm:!1,requestData:null}},methods:Object(s["a"])(Object(s["a"])({},Object(i["b"])({getRoomExchangeRequest:"getRoomExchangeRequest",readRoomExchangeRequest:"readRoomExchangeRequest"})),{},{replyExchangeRequest:function(e){this.requestData=e,this.showExchangeForm=!0},readRequest:function(e){this.readRoomExchangeRequest(e)}})},tt=et,ot=Object(v["a"])(tt,Xe,Ze,!1,null,"5188a892",null),nt=ot.exports,rt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("page-title",{attrs:{title:"設定"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-card",[o("v-card-title",[o("span",[e._v("更改用戶名")])]),o("v-card-text",[o("v-form",{ref:"form"},[o("v-text-field",{attrs:{label:"新用戶名"},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1)],1),o("v-card-actions",[o("v-btn",{on:{click:function(t){return e.changeNickname({nickname:e.nickname})}}},[e._v("更改")])],1)],1)],1)],1)},at=[],st={components:{PageTitle:xe},mounted:function(){this.nickname=this.user.nickname},computed:Object(s["a"])({},Object(i["c"])({user:"user"})),data:function(){return{nickname:""}},methods:Object(s["a"])({},Object(i["b"])({changeNickname:"changeNickname"}))},it=st,ct=Object(v["a"])(it,rt,at,!1,null,"75b6f1cb",null),lt=ct.exports;n["default"].use(P["a"]);var ut=[{path:"/",name:"Home",component:Ke},{path:"/available-room",name:"AvailableRoom",component:De},{path:"/calendar",name:"Calendar",component:ne,meta:{auth:!0}},{path:"/login",name:"Login",component:Pe},{path:"/dashboard",name:"Dashboard",component:Ke},{path:"/room-exchange",name:"RoomExchange",component:nt},{path:"/setting",name:"Setting",component:lt}],dt=new P["a"]({mode:"history",base:"",routes:ut});dt.beforeEach(function(){var e=Object($["a"])(regeneratorRuntime.mark((function e(t,o,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.clear(),Rt.getters.isVerified){e.next=6;break}if(a=n["default"].$cookies.get("user"),!a){e.next=6;break}return e.next=6,Rt.dispatch("verify",a).then((function(){Rt.state.user=a}));case 6:Rt.getters.isVerified||"Login"===t.name?Rt.getters.isVerified&&"Login"===t.name?r({name:"DashBoard"}):r():r({name:"Login"});case 7:case"end":return e.stop()}}),e)})));return function(t,o,n){return e.apply(this,arguments)}}());var ht=dt,mt={login:function(e,t){var o=e.state,r=e.dispatch,a={message:"登入成功",type:"success"};return T.a.post(o.address+o.api_version+o.apis.verification,t).then((function(e){o.user=e.data.data,n["default"].$cookies.set("user",o.user),T.a.defaults.headers.common["Authorization"]="Token "+o.user.token,ht.push("/").then((function(){r("showAlert",a)}))})).catch((function(e){a={message:"登入失敗，請再嘗試一次",type:"error"},r("showAlert",a),console.error(e.response)}))},logout:function(e,t){var o=e.state,r=t||o.user;return T.a.get(o.address+o.api_version+o.apis.verification+"".concat(r?r.id:-1,"/")).then((function(e){console.log(e.data.message),n["default"].$cookies.remove("user"),o.user={id:-1,username:"",nickname:"",token:""},ht.push("/login")})).catch((function(e){console.error(e.response)}))},verify:function(e,t){var o=e.state,r=t||o.user;return T.a.defaults.headers.common["Authorization"]="Token "+r.token,T.a.get(o.address+o.api_version+o.apis.verification+"".concat(r?r.id:-1,"/")).then((function(){console.log("verify success")})).catch((function(e){console.error(e),n["default"].$cookies.remove("user")}))},changeNickname:function(e,t){var o=e.state,n=o.user;return T.a.defaults.headers.common["Authorization"]="Token "+n.token,T.a.patch(o.address+o.api_version+o.apis.user+"".concat(n?n.id:-1,"/"),t).then((function(){console.log("change success")})).catch((function(e){console.error(e.response)}))}},ft={locationsRefresh:function(e){var t=e.state;return T.a.get(t.address+t.api_version+t.apis.location).then((function(e){t.locations=e.data})).catch((function(e){console.error(e.response)}))}},vt={roomsRefresh:function(e){var t=e.state;return T.a.get(t.address+t.api_version+t.apis.room).then((function(e){t.meetingRooms=e.data})).catch((function(e){console.error(e)}))}},pt={reservationsRefresh:function(e){var t=e.state;return T.a.get(t.address+t.api_version+t.apis.reservation).then((function(e){t.reservations=e.data.map((function(e){return e}))}))},newReservation:function(e,t){var o=e.state,n=e.dispatch;return T.a.post(o.address+o.api_version+o.apis.reservation,t).then((function(e){console.log(e.data.message),n("reservationsRefresh"),n("showAlert",{message:"預約成功",type:"success"})})).catch((function(e){var t="";switch(e.response.status){case 400:t="請勿嘗試預約過去的時間";break;case 409:t="預約時間已被其他人預約，請參考預約時間表";break;default:t="預約失敗"}n("showAlert",{message:t,type:"error"}),console.error(e.response)}))},deleteReservation:function(e,t){var o=e.state,n=e.dispatch;return T.a.delete(o.address+o.api_version+o.apis.reservation+t.id+"/").then((function(e){console.log(e.data.message),n("reservationsRefresh").then((function(){n("showAlert",{message:"刪除預約成功",type:"success"})}))})).catch((function(e){n("showAlert",{message:"刪除預約失敗",type:"error"}),console.error(e.response)}))}},gt={getMessages:function(e){var t=e.state;return T.a.get(t.address+t.api_version+t.apis.messages).then((function(e){t.messages=e.data})).catch((function(e){console.error(e.response)}))}},_t={showAlert:function(e,t){var o=e.state;o.alert.message=t.message,o.alert.type=t.type,o.alertSwitch=!0,setTimeout((function(){o.alertSwitch=!1}),2e3)}},bt={getRoomExchangeRequest:function(e){var t=e.state;return T.a.get(t.address+t.api_version+t.apis.roomExchangeRequest).then((function(e){t.roomExchangeRequests=e.data}))},replyExchangeRequest:function(e,t){var o=e.state,n=e.dispatch;return T.a.patch(o.address+o.api_version+o.apis.roomExchangeRequest+t.id+"/",t).then((function(e){console.log(e),n("showAlert",{message:"回覆成功",type:"success"}),n("getRoomExchangeRequest")})).catch((function(e){console.error(e),n("showAlert",{message:"回覆失敗",type:"error"})}))},makeExchangeRequest:function(e,t){var o=e.state,n=e.dispatch;return T.a.post(o.address+o.api_version+o.apis.roomExchangeRequest,t).then((function(e){console.log(e),n("showAlert",{message:"申請已送出",type:"success"})})).catch((function(e){console.error(e),n("showAlert",{message:"此預約已被協議或是已過期",type:"error"})}))},readRoomExchangeRequest:function(e,t){var o=e.state,n=e.dispatch;return T.a.get(o.address+o.api_version+o.apis.roomExchangeRequest+"".concat(t,"/read/")).then((function(e){console.log(e.data),n("getRoomExchangeRequest")}))}},wt=Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},mt),ft),vt),pt),_t),gt),bt);n["default"].use(i["a"]);var Rt=new i["a"].Store({state:Object(s["a"])({},D),getters:Object(s["a"])({},q),mutations:{},actions:Object(s["a"])({},wt),modules:{}}),kt=o("ce5b"),xt=o.n(kt),yt=(o("bf40"),o("fcf4")),jt=(yt["a"].white,yt["a"].grey.lighten1,yt["a"].cyan.lighten1,yt["a"].red.darken1,yt["a"].cyan.lighten1,yt["a"].green.lighten1,yt["a"].orange.lighten1,yt["a"].white,yt["a"].grey.lighten1,yt["a"].cyan.lighten1,yt["a"].red.darken1,yt["a"].cyan.lighten1,yt["a"].green.lighten1,yt["a"].orange.lighten1,o("130e")),Ot=o("2b27"),Dt=o.n(Ot);n["default"].config.productionTip=!1,n["default"].use(xt.a),n["default"].use(jt["a"],T.a),n["default"].use(Dt.a),T.a.defaults.validateStatus=function(e){return 200<=e&&e<300},n["default"].$cookies.config("1d","","",!0),new n["default"]({store:Rt,router:ht,vuetify:new xt.a({}),render:function(e){return e(R)}}).$mount("#app")},"85ec":function(e,t,o){},"8ac0":function(e,t,o){"use strict";o("4bdf")},"8c32":function(e,t,o){"use strict";o("fbcf")},fbcf:function(e,t,o){}});
//# sourceMappingURL=index.93c3e31b.js.map